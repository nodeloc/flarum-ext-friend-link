(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const n=flarum.core.compat["common/app"];var a=t.n(n);a().initializers.add("nodeloc/vps",(function(){}));const s=flarum.core.compat["forum/app"];var i=t.n(s);const o=flarum.core.compat.extend,r=flarum.core.compat["components/IndexPage"];var c=t.n(r);const l=flarum.core.compat["components/LinkButton"];var u=t.n(l);const d=flarum.core.compat["common/components/Dropdown"];var h=t.n(d);const p=flarum.core.compat["common/components/Button"];var f=t.n(p);function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function v(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,g(t,e)}const y=flarum.core.compat["components/Page"];var b=t.n(y);const _=flarum.core.compat["common/helpers/listItems"];var w=t.n(_);const x=flarum.core.compat["common/Component"];var N=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.state=e.attrs.state},n.view=function(){var t=this,e=app.search.cachedSearches.cardFilter||"recent";return h().component({buttonClassName:"Button",label:app.translator.trans("nodeloc-vps.forum.filter."+e+"_label")},["recent","score","score_asc","cpu","cpu_asc","memory","memory_asc","storage","storage_asc","bandwidth","bandwidth_asc","GIG","GIG_asc","price","price_asc"].map((function(n){var a=e===n;return f().component({icon:!a||"fas fa-check",active:a,onclick:function(){return t.updateFilter(n)}},app.translator.trans("nodeloc-vps.forum.filter."+n+"_label"))})))},n.updateFilter=function(t){this.attrs.onChange(t)},e}(t.n(x)());const S=flarum.core.compat["common/components/Modal"];var T=t.n(S);const M=flarum.core.compat["common/components/Alert"];var k=t.n(M);flarum.core.compat["common/helpers/icon"],flarum.core.compat["common/utils/ItemList"];const I=flarum.core.compat["common/utils/classList"];var L=t.n(I);const C=flarum.core.compat["common/components/LoadingIndicator"];var V=t.n(C);const G=flarum.core.compat["utils/Stream"];var P=t.n(G);const B=flarum.core.compat["common/components/Select"];var F=t.n(B);const q=flarum.core.compat["common/components/Switch"];var A=t.n(q);const O=flarum.core.compat["common/utils/extractText"];var D=t.n(O);const E=flarum.core.compat["common/utils/KeyboardNavigatable"];var R=t.n(E);const U=flarum.core.compat["common/utils/Stream"];var j=t.n(U),$=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).loading=!0,e.merchants=void 0,e.selected=[],e.bypassReqs=!1,e.filter=j()(""),e.focused=!1,e.navigator=new(R()),e.indexMerchant=void 0,e}v(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.title||(e.title=D()(a().translator.trans("nodeloc-vps.forum.merchant_selection_modal.title"))),e.canSelect||(e.canSelect=function(){return!0})};var n=e.prototype;return n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e),this.navigator.onUp((function(){return n.setIndex(n.getCurrentNumericIndex()-1,!0)})).onDown((function(){return n.setIndex(n.getCurrentNumericIndex()+1,!0)})).onSelect(this.select.bind(this)).onRemove((function(){return n.selected.splice(n.selected.length-1,1)})),a().request({method:"GET",url:a().forum.attribute("apiUrl")+"/merchants"}).then((function(t){n.merchants=t.data,n.merchants=t.data.map((function(t){return{id:t.id,merchant_name:t.attributes.merchant_name,merchant_intro:t.attributes.merchant_intro}})),n.loading=!1,n.attrs.selectableMerchants&&(n.merchants=n.attrs.selectableMerchants(n.merchants)),n.attrs.selectedMerchants&&n.attrs.selectedMerchants.map(n.addMerchant.bind(n)),n.indexMerchant=n.merchants[0],m.redraw()}))},n.className=function(){return L()("TagSelectionModal",this.attrs.className)},n.title=function(){return this.attrs.title},n.content=function(){var t=this;if(this.loading||!this.merchants)return m(V(),null);this.filter().toLowerCase();var e=this.getFilteredMerchants();return[m("div",{className:"Modal-body"},m("div",{className:"TagSelectionModal-form"},m("div",{className:"TagSelectionModal-form-input"},m("div",{className:"TagsInput FormControl "+(this.focused?"focus":""),onclick:function(){return t.$(".TagsInput input").focus()}},m("span",{className:"TagsInput-selected"},this.selected.map((function(e){return m("span",{className:"TagsInput-tag",onclick:function(){t.removeMerchant(e),t.onready()}},m("span",{class:"TagLabel  colored text-contrast--dark",style:"--tag-color: #2cb2b5;"},m("span",{className:"TagLabel-text"},m("span",{className:"TagLabel-name"},e.merchant_name))))}))),m("input",{className:"FormControl",bidi:this.filter,onkeydown:this.navigator.navigate.bind(this.navigator),onfocus:function(){return t.focused=!0},onblur:function(){return t.focused=!1}}))),m("div",{className:"TagSelectionModal-form-submit App-primaryControl"},m(f(),{type:"submit",className:"Button Button--primary",icon:"fas fa-check"},a().translator.trans("nodeloc-vps.forum.merchant_selection_modal.submit_button"))))),m("div",{className:"Modal-footer"},m("ul",{className:"TagSelectionModal-list SelectTagList"},e.map((function(e){return m("li",{"data-index":e.id,className:L()({pinned:!0,selected:t.selected.includes(e),active:t.indexMerchant===e}),onmouseover:function(){return t.indexMerchant=e},onclick:t.toggleMerchant.bind(t,e)},m("i",{class:"icon fas fa-question-circle",style:"--color: #be4b4b; color: rgb(190, 75, 75);"}),m("span",{className:"SelectTagListItem-name"},e.merchant_name),e.merchant_intro?m("span",{className:"SelectTagListItem-description"},e.merchant_intro):"")}))))]},n.getFilteredMerchants=function(){var t=this.filter().toLowerCase(),e=this.merchants;return t&&(e=e.filter((function(e){return e.merchant_name.toLowerCase().includes(t)}))),this.indexMerchant&&e.includes(this.indexMerchant)||(this.indexMerchant=e[0]),e},n.meetsRequirements=function(t,e){return!(this.selected.length<1)},n.addMerchant=function(t){if(t&&this.attrs.canSelect(t)){if(this.attrs.onSelect&&this.attrs.onSelect(t,this.selected),this.attrs.requireParentMerchant){var e=t.parent();e&&!this.selected.includes(e)&&this.selected.push(e)}this.selected.includes(t)||this.selected.push(t)}},n.removeMerchant=function(t){var e=this.selected.indexOf(t);-1!==e&&(this.selected.splice(e,1),this.attrs.requireParentMerchant&&this.selected.filter((function(e){return e.parent()===t})).forEach(this.removeMerchant.bind(this)),this.attrs.onDeselect&&this.attrs.onDeselect(t,this.selected))},n.toggleMerchant=function(t){this.merchants&&(this.selected.includes(t)?this.removeMerchant(t):this.addMerchant(t),this.filter()&&(this.filter(""),this.indexMerchant=this.merchants[0]),this.onready())},n.getInstruction=function(t,e){if(this.bypassReqs)return"";if(t<this.attrs.limits.min.primary){var n=this.attrs.limits.min.primary-t;return D()(a().translator.trans("nodeloc-vps.forum.merchant_selection_modal.choose_primary_placeholder",{count:n}))}if(e<this.attrs.limits.min.secondary){var s=this.attrs.limits.min.secondary-e;return D()(a().translator.trans("nodeloc-vps.forum.merchant_selection_modal.choose_secondary_placeholder",{count:s}))}if(this.selected.length<this.attrs.limits.min.total){var i=this.attrs.limits.min.total-this.selected.length;return D()(a().translator.trans("nodeloc-vps.forum.merchant_selection_modal.choose_merchants_placeholder",{count:i}))}return""},n.onsubmit=function(t){t.preventDefault(),this.attrs.onsubmit&&this.attrs.onsubmit(this.selected),a().modal.close()},n.select=function(t){t.metaKey||t.ctrlKey||this.indexMerchant&&this.selected.includes(this.indexMerchant)?this.selected.length&&this.$('button[type="submit"]').click():this.indexMerchant&&this.getItem(this.indexMerchant)[0].dispatchEvent(new Event("click"))},n.selectableItems=function(){return this.$(".MerchantSelectionModal-list > li")},n.getCurrentNumericIndex=function(){return this.indexMerchant?this.selectableItems().index(this.getItem(this.indexMerchant)):-1},n.getItem=function(t){return this.selectableItems().filter('[data-index="'+t.id()+'"]')},n.setIndex=function(t,e){var n=this.selectableItems(),s=n.parent();t<0?t=n.length-1:t>=n.length&&(t=0);var i=n.eq(t);if(this.indexMerchant=a().store.getById("merchants",i.attr("data-index")),m.redraw(),e&&this.indexMerchant){var o,r=s.scrollTop(),c=s.offset().top,l=c+s.outerHeight(),u=i.offset().top,d=u+i.outerHeight();u<c?o=r-c+u-parseInt(s.css("padding-top"),10):d>l&&(o=r-l+d+parseInt(s.css("padding-bottom"),10)),void 0!==o&&s.stop(!0).animate({scrollTop:o},100)}},e}(T()),H=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).loading=!0,e.locations=void 0,e.selected=[],e.bypassReqs=!1,e.filter=j()(""),e.focused=!1,e.navigator=new(R()),e.indexLocation=void 0,e}v(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.title||(e.title=D()(a().translator.trans("nodeloc-vps.forum.location_selection_modal.title"))),e.canSelect||(e.canSelect=function(){return!0})};var n=e.prototype;return n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e),this.navigator.onUp((function(){return n.setIndex(n.getCurrentNumericIndex()-1,!0)})).onDown((function(){return n.setIndex(n.getCurrentNumericIndex()+1,!0)})).onSelect(this.select.bind(this)).onRemove((function(){return n.selected.splice(n.selected.length-1,1)})),a().request({method:"GET",url:a().forum.attribute("apiUrl")+"/locations"}).then((function(t){n.locations=t.data,n.locations=t.data.map((function(t){return{id:t.id,location_name:t.attributes.location_name,location_intro:t.attributes.location_intro}})),n.loading=!1,n.attrs.selectableLocations&&(n.locations=n.attrs.selectableLocations(n.locations)),n.attrs.selectedLocations&&n.attrs.selectedLocations.map(n.addLocation.bind(n)),n.indexLocation=n.locations[0],m.redraw()}))},n.className=function(){return L()("TagSelectionModal",this.attrs.className)},n.title=function(){return this.attrs.title},n.content=function(){var t=this;if(this.loading||!this.locations)return m(V(),null);this.filter().toLowerCase();var e=this.getFilteredLocations();return[m("div",{className:"Modal-body"},m("div",{className:"TagSelectionModal-form"},m("div",{className:"TagSelectionModal-form-input"},m("div",{className:"TagsInput FormControl "+(this.focused?"focus":""),onclick:function(){return t.$(".TagsInput input").focus()}},m("span",{className:"TagsInput-selected"},this.selected.map((function(e){return m("span",{className:"TagsInput-tag",onclick:function(){t.removeLocation(e),t.onready()}},m("span",{class:"TagLabel  colored text-contrast--dark",style:"--tag-color: #2cb2b5;"},m("span",{className:"TagLabel-text"},m("span",{className:"TagLabel-name"},e.location_name))))}))),m("input",{className:"FormControl",bidi:this.filter,onkeydown:this.navigator.navigate.bind(this.navigator),onfocus:function(){return t.focused=!0},onblur:function(){return t.focused=!1}}))),m("div",{className:"TagSelectionModal-form-submit App-primaryControl"},m(f(),{type:"submit",className:"Button Button--primary",icon:"fas fa-check"},a().translator.trans("nodeloc-vps.forum.location_selection_modal.submit_button"))))),m("div",{className:"Modal-footer"},m("ul",{className:"TagSelectionModal-list SelectTagList"},e.map((function(e){return m("li",{"data-index":e.id,className:L()({pinned:!0,selected:t.selected.includes(e),active:t.indexLocation===e}),onmouseover:function(){return t.indexLocation=e},onclick:t.toggleLocation.bind(t,e)},m("i",{class:"icon fas fa-question-circle",style:"--color: #be4b4b; color: rgb(190, 75, 75);"}),m("span",{className:"SelectTagListItem-name"},e.location_name),e.location_intro?m("span",{className:"SelectTagListItem-description"},e.location_intro):"")}))))]},n.getFilteredLocations=function(){var t=this.filter().toLowerCase(),e=this.locations;return t&&(e=e.filter((function(e){return e.location_name.toLowerCase().includes(t)}))),this.indexLocation&&e.includes(this.indexLocation)||(this.indexLocation=e[0]),e},n.meetsRequirements=function(t,e){return!(this.selected.length<1)},n.addLocation=function(t){if(t&&this.attrs.canSelect(t)){if(this.attrs.onSelect&&this.attrs.onSelect(t,this.selected),this.attrs.requireParentLocation){var e=t.parent();e&&!this.selected.includes(e)&&this.selected.push(e)}this.selected.includes(t)||this.selected.push(t)}},n.removeLocation=function(t){var e=this.selected.indexOf(t);-1!==e&&(this.selected.splice(e,1),this.attrs.requireParentLocation&&this.selected.filter((function(e){return e.parent()===t})).forEach(this.removeLocation.bind(this)),this.attrs.onDeselect&&this.attrs.onDeselect(t,this.selected))},n.toggleLocation=function(t){this.locations&&(this.selected.includes(t)?this.removeLocation(t):this.addLocation(t),this.filter()&&(this.filter(""),this.indexLocation=this.locations[0]),this.onready())},n.getInstruction=function(t,e){if(this.bypassReqs)return"";if(t<this.attrs.limits.min.primary){var n=this.attrs.limits.min.primary-t;return D()(a().translator.trans("nodeloc-vps.forum.location_selection_modal.choose_primary_placeholder",{count:n}))}if(e<this.attrs.limits.min.secondary){var s=this.attrs.limits.min.secondary-e;return D()(a().translator.trans("nodeloc-vps.forum.location_selection_modal.choose_secondary_placeholder",{count:s}))}if(this.selected.length<this.attrs.limits.min.total){var i=this.attrs.limits.min.total-this.selected.length;return D()(a().translator.trans("nodeloc-vps.forum.location_selection_modal.choose_locations_placeholder",{count:i}))}return""},n.onsubmit=function(t){t.preventDefault(),this.attrs.onsubmit&&this.attrs.onsubmit(this.selected),a().modal.close()},n.select=function(t){t.metaKey||t.ctrlKey||this.indexLocation&&this.selected.includes(this.indexLocation)?this.selected.length&&this.$('button[type="submit"]').click():this.indexLocation&&this.getItem(this.indexLocation)[0].dispatchEvent(new Event("click"))},n.selectableItems=function(){return this.$(".LocationSelectionModal-list > li")},n.getCurrentNumericIndex=function(){return this.indexLocation?this.selectableItems().index(this.getItem(this.indexLocation)):-1},n.getItem=function(t){return this.selectableItems().filter('[data-index="'+t.id()+'"]')},n.setIndex=function(t,e){var n=this.selectableItems(),s=n.parent();t<0?t=n.length-1:t>=n.length&&(t=0);var i=n.eq(t);if(this.indexLocation=a().store.getById("locations",i.attr("data-index")),m.redraw(),e&&this.indexLocation){var o,r=s.scrollTop(),c=s.offset().top,l=c+s.outerHeight(),u=i.offset().top,d=u+i.outerHeight();u<c?o=r-c+u-parseInt(s.css("padding-top"),10):d>l&&(o=r-l+d+parseInt(s.css("padding-bottom"),10)),void 0!==o&&s.stop(!0).animate({scrollTop:o},100)}},e}(T()),K=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).loading=!0,e.vpstags=void 0,e.selected=[],e.bypassReqs=!1,e.filter=j()(""),e.focused=!1,e.navigator=new(R()),e.indexVpsTags=void 0,e}v(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.title||(e.title=D()(a().translator.trans("nodeloc-vps.forum.vpstag_selection_modal.title"))),e.canSelect||(e.canSelect=function(){return!0})};var n=e.prototype;return n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e),this.navigator.onUp((function(){return n.setIndex(n.getCurrentNumericIndex()-1,!0)})).onDown((function(){return n.setIndex(n.getCurrentNumericIndex()+1,!0)})).onSelect(this.select.bind(this)).onRemove((function(){return n.selected.splice(n.selected.length-1,1)})),a().request({method:"GET",url:a().forum.attribute("apiUrl")+"/vpstags"}).then((function(t){n.vpstags=t.data,n.vpstags=t.data.map((function(t){return{id:t.id,tag_name:t.attributes.tag_name}})),n.loading=!1,n.attrs.selectableVpsTags&&(n.vpstags=n.attrs.selectableVpsTags(n.vpstags)),n.attrs.selectedVpsTags&&n.attrs.selectedVpsTags.map(n.addVpsTags.bind(n)),n.indexVpsTags=n.vpstags[0],m.redraw()}))},n.className=function(){return L()("TagSelectionModal",this.attrs.className)},n.title=function(){return this.attrs.title},n.content=function(){var t=this;if(this.loading||!this.vpstags)return m(V(),null);this.filter().toLowerCase();var e=this.getFilteredVpsTags();return[m("div",{className:"Modal-body"},m("div",{className:"TagSelectionModal-form"},m("div",{className:"TagSelectionModal-form-input"},m("div",{className:"TagsInput FormControl "+(this.focused?"focus":""),onclick:function(){return t.$(".TagsInput input").focus()}},m("span",{className:"TagsInput-selected"},this.selected.map((function(e){return m("span",{className:"TagsInput-tag",onclick:function(){t.removeVpsTags(e),t.onready()}},m("span",{class:"TagLabel  colored text-contrast--dark",style:"--tag-color: #2cb2b5;"},m("span",{className:"TagLabel-text"},m("span",{className:"TagLabel-name"},e.tag_name))))}))),m("input",{className:"FormControl",bidi:this.filter,onkeydown:this.navigator.navigate.bind(this.navigator),onfocus:function(){return t.focused=!0},onblur:function(){return t.focused=!1}}))),m("div",{className:"TagSelectionModal-form-submit App-primaryControl"},m(f(),{type:"submit",className:"Button Button--primary",icon:"fas fa-check"},a().translator.trans("nodeloc-vps.forum.vpstag_selection_modal.submit_button"))))),m("div",{className:"Modal-footer"},m("ul",{className:"TagSelectionModal-list SelectTagList"},e.map((function(e){return m("li",{"data-index":e.id,className:L()({pinned:!0,selected:t.selected.includes(e),active:t.indexVpsTags===e}),onmouseover:function(){return t.indexVpsTags=e},onclick:t.toggleVpsTags.bind(t,e)},m("i",{class:"icon fas fa-question-circle",style:"--color: #be4b4b; color: rgb(190, 75, 75);"}),m("span",{className:"SelectTagListItem-name"},e.tag_name),e.tag_intro?m("span",{className:"SelectTagListItem-description"},e.tag_intro):"")}))))]},n.getFilteredVpsTags=function(){var t=this.filter().toLowerCase(),e=this.vpstags;return t&&(e=e.filter((function(e){return e.tag_name.toLowerCase().includes(t)}))),this.indexVpsTags&&e.includes(this.indexVpsTags)||(this.indexVpsTags=e[0]),e},n.meetsRequirements=function(t,e){return!(this.selected.length<1)},n.addVpsTags=function(t){if(t&&this.attrs.canSelect(t)){if(this.attrs.onSelect&&this.attrs.onSelect(t,this.selected),this.attrs.requireParentVpsTags){var e=t.parent();e&&!this.selected.includes(e)&&this.selected.push(e)}this.selected.includes(t)||this.selected.push(t)}},n.removeVpsTags=function(t){var e=this.selected.indexOf(t);-1!==e&&(this.selected.splice(e,1),this.attrs.requireParentVpsTags&&this.selected.filter((function(e){return e.parent()===t})).forEach(this.removeVpsTags.bind(this)),this.attrs.onDeselect&&this.attrs.onDeselect(t,this.selected))},n.toggleVpsTags=function(t){this.vpstags&&(this.selected.includes(t)?this.removeVpsTags(t):this.addVpsTags(t),this.filter()&&(this.filter(""),this.indexVpsTags=this.vpstags[0]),this.onready())},n.getInstruction=function(t,e){if(this.bypassReqs)return"";if(t<this.attrs.limits.min.primary){var n=this.attrs.limits.min.primary-t;return D()(a().translator.trans("nodeloc-vps.forum.vpstag_selection_modal.choose_primary_placeholder",{count:n}))}if(e<this.attrs.limits.min.secondary){var s=this.attrs.limits.min.secondary-e;return D()(a().translator.trans("nodeloc-vps.forum.vpstag_selection_modal.choose_secondary_placeholder",{count:s}))}if(this.selected.length<this.attrs.limits.min.total){var i=this.attrs.limits.min.total-this.selected.length;return D()(a().translator.trans("nodeloc-vps.forum.vpstag_selection_modal.choose_vpstags_placeholder",{count:i}))}return""},n.onsubmit=function(t){t.preventDefault(),this.attrs.onsubmit&&this.attrs.onsubmit(this.selected),a().modal.close()},n.select=function(t){t.metaKey||t.ctrlKey||this.indexVpsTags&&this.selected.includes(this.indexVpsTags)?this.selected.length&&this.$('button[type="submit"]').click():this.indexVpsTags&&this.getItem(this.indexVpsTags)[0].dispatchEvent(new Event("click"))},n.selectableItems=function(){return this.$(".VpsTagsSelectionModal-list > li")},n.getCurrentNumericIndex=function(){return this.indexVpsTags?this.selectableItems().index(this.getItem(this.indexVpsTags)):-1},n.getItem=function(t){return this.selectableItems().filter('[data-index="'+t.id()+'"]')},n.setIndex=function(t,e){var n=this.selectableItems(),s=n.parent();t<0?t=n.length-1:t>=n.length&&(t=0);var i=n.eq(t);if(this.indexVpsTags=a().store.getById("vpstags",i.attr("data-index")),m.redraw(),e&&this.indexVpsTags){var o,r=s.scrollTop(),c=s.offset().top,l=c+s.outerHeight(),u=i.offset().top,d=u+i.outerHeight();u<c?o=r-c+u-parseInt(s.css("padding-top"),10):d>l&&(o=r-l+d+parseInt(s.css("padding-bottom"),10)),void 0!==o&&s.stop(!0).animate({scrollTop:o},100)}},e}(T()),z={0:"月付",1:"季付",2:"半年付",3:"年付",4:"二年付",5:"三年付",6:"五年付"},Y={0:"SSD",1:"NVME",2:"HDD"},J={0:"USD",1:"CNY",2:"HKD",3:"EUR",4:"GBP",5:"JPY"},Q={false:"无货",true:"有货"},W={0:"0分",1:"1分",2:"2分",3:"3分",4:"4分",5:"5分"},X={0:"国外商家",1:"国外OneMan",2:"国人商家",3:"国人OneMan"},Z=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).savedState={},e}v(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e);var n=this.attrs.vps;this.settingType="add",this.user=e.attrs.user||i().session.user,this.state=this.attrs.state.modal.attrs.state,this.selectedMerchants=P()(this.state.selectedMerchants||[]),this.selectedLocations=P()(this.state.selectedLocations||[]),this.selectedVpsTags=P()(this.state.selectedVpsTags||[]),n?(this.settingType="edit",this.product_name=P()(n.product_name),this.product_type=1===n.product_type,this.merchant_id=P()(n.merchant_id),this.merchant_name=P()(n.merchant_name),this.cpu=P()(n.cpu),this.memory=P()(n.memory),this.storage=P()(n.storage),this.disk_type=P()(n.disk_type),this.location_id=P()(n.location_id),this.bandwidth=P()(n.bandwidth),this.GIG=P()(n.GIG),this.cost=P()(n.cost),this.currency=P()(n.currency),this.payment_cycle=P()(n.payment_cycle),this.score=P()(n.score),this.monitor_url=P()(n.monitor_url),this.monitor_rule=P()(n.monitor_rule),this.available=P()(n.available),this.review_url=P()(n.review_url),this.buy_url=P()(n.buy_url)):(this.product_name=P()(""),this.product_type=!1,this.merchant_id=P()(0),this.location_id=P()(0),this.merchant_name=P()(""),this.cpu=P()(0),this.memory=P()(0),this.storage=P()(0),this.disk_type=P()(0),this.location=P()(0),this.bandwidth=P()(0),this.GIG=P()(0),this.cost=P()(0),this.currency=P()(0),this.payment_cycle=P()(0),this.score=P()(0),this.monitor_url=P()(""),this.monitor_rule=P()(""),this.available=P()(0),this.review_url=P()(""),this.buy_url=P()(""))},n.title=function(){return i().translator.trans("nodeloc-vps.forum.modal.add_product.title")},n.className=function(){return"Modal--large"},n.content=function(){var t=this;if(this.user)return m("div",null,m("div",{className:"Modal-body"},m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"pruduct_name",placeholder:i().translator.trans("nodeloc-vps.forum.product.product_name"),bidi:this.product_name})),m(f(),{className:"add-select unselect",icon:"fas fa-tag",onclick:function(){return t.openMerchantSelectionModal()}},this.selectedMerchants().length>0?this.selectedMerchants()[0].merchant_name:"选择商家"),m(f(),{style:"display: inline-block;margin-left: 10px;",className:"add-select unselect",icon:"fas fa-tag",onclick:function(){return t.openLocationSelectionModal()}},this.selectedLocations().length>0?this.selectedLocations()[0].location_name:"选择地区"),m("div",{style:"display: inline-block;margin-left: 10px;"},A().component({state:this.product_type,onchange:function(e){t.product_type=e}},i().translator.trans("nodeloc-vps.forum.product.product_type"))),m("div",{style:"margin-top: 20px;"},this.selectedVpsTags().length>0?this.selectedVpsTags().map((function(e,n){return m(f(),{style:"display: inline-block;",className:"add-select unselect",icon:"fas fa-tag",onclick:function(){return t.openTagsSelectionModal()}},e.tag_name)})):m(f(),{style:"display: inline-block;",className:"add-select unselect",icon:"fas fa-tag",onclick:function(){return t.openTagsSelectionModal()}},"选择标签")),m("div",{className:"product_config"},m("div",{style:"margin-top:15px;font-weight:bold;"},m("label",{style:"width:25%;display: inline-block;"},i().translator.trans("nodeloc-vps.forum.product.cpu")),m("input",{style:"width:25%;display: inline-block;",required:!0,className:"FormControl",type:"number",step:"1",min:"1",bidi:this.cpu}),m("label",{style:"width:25%;display: inline-block; padding-left: 10px;"},i().translator.trans("nodeloc-vps.forum.product.memory")),m("input",{style:"width:25%;display: inline-block;",required:!0,className:"FormControl",type:"number",step:"1",min:"0",bidi:this.memory})),m("div",{style:"display:flex;align-items: center;margin-top:15px;font-weight:bold;"},m("label",{style:"width:25%;display: inline-block;"},i().translator.trans("nodeloc-vps.forum.product.storage")),m("input",{style:"width:25%;display: inline-block;",required:!0,className:"FormControl",type:"number",step:"1",min:"1",bidi:this.storage}),m("label",{style:"width:25%;display: inline-block; padding-left: 10px;"},i().translator.trans("nodeloc-vps.forum.product.disk_type")),m(F(),{value:this.disk_type(),style:"display: inline-block;",options:Y,buttonClassName:"Button",onchange:this.disk_type})),m("div",{style:"margin-top:15px;font-weight:bold;"},m("label",{style:"width:25%;display: inline-block;"},i().translator.trans("nodeloc-vps.forum.product.bandwidth")),m("input",{style:"width:25%;display: inline-block;",required:!0,className:"FormControl",type:"number",step:"1",min:"1",bidi:this.bandwidth}),m("label",{style:"width:25%;display: inline-block; padding-left: 10px;"},i().translator.trans("nodeloc-vps.forum.product.GIG")),m("input",{style:"width:25%;display: inline-block;",required:!0,className:"FormControl",type:"number",step:"1",min:"0",bidi:this.GIG})),m("div",{style:"margin-top:15px;font-weight:bold;margin-bottom: 20px;"},m("label",{style:"width:25%;display: inline-block;"},i().translator.trans("nodeloc-vps.forum.product.cost")),m("input",{style:"width:25%;display: inline-block;",required:!0,className:"FormControl",type:"number",step:"1",min:"1",bidi:this.cost}),m("label",{style:"width:25%;display: inline-block;padding-left: 10px;"},i().translator.trans("nodeloc-vps.forum.product.currency")),m(F(),{value:this.currency(),style:"display: inline-block;",options:J,buttonClassName:"Button",onchange:this.currency})),m("div",{style:"margin-top:15px;font-weight:bold;margin-bottom: 20px;"},m("label",{style:"width:25%;display: inline-block; "},i().translator.trans("nodeloc-vps.forum.product.payment_cycle")),m(F(),{value:this.payment_cycle(),style:"display: inline-block;",options:z,buttonClassName:"Button",onchange:this.payment_cycle}),m("label",{style:"width:25%;display: inline-block;padding-left: 10px;"},i().translator.trans("nodeloc-vps.forum.product.score")),m(F(),{value:this.score(),style:"display: inline-block;",options:W,buttonClassName:"Button",onchange:this.score})),m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"monitor_url",placeholder:i().translator.trans("nodeloc-vps.forum.product.monitor_url"),bidi:this.monitor_url})),m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"monitor_rule",placeholder:i().translator.trans("nodeloc-vps.forum.product.monitor_rule"),bidi:this.monitor_rule})),m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"buy_url",placeholder:i().translator.trans("nodeloc-vps.forum.product.buy_url"),bidi:this.buy_url})),m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"review_url",placeholder:i().translator.trans("nodeloc-vps.forum.product.review_url"),bidi:this.review_url})))),m("div",{className:"Modal-footer"},m(f(),{onclick:this.onConfirmSubmit.bind(this),className:"Button Button--primary"},"确认"),m(f(),{onclick:this.hide.bind(this),className:"Button"},"取消")))},n.openMerchantSelectionModal=function(){var t,n,a=this;this.savedState={product_name:this.product_name(),product_type:this.product_type,cpu:this.cpu(),memory:this.memory(),storage:this.storage(),disk_type:this.disk_type(),bandwidth:this.bandwidth(),GIG:this.GIG(),cost:this.cost(),score:this.score(),payment_cycle:this.payment_cycle(),monitor_url:this.monitor_url(),monitor_rule:this.monitor_rule(),available:this.available(),currency:this.currency(),review_url:this.review_url(),buy_url:this.buy_url(),merchant_id:(null==(t=this.selectedMerchants()[0])?void 0:t.id)||null,location_id:(null==(n=this.selectedLocations()[0])?void 0:n.id)||null,tags:this.selectedVpsTags().map((function(t){return t.id}))},i().modal.show($,{state:this.state,savedState:this.savedState,onsubmit:function(t){a.handleMerchantSelect(t),i().modal.show(e,{state:a.state,vps:a.savedState}),m.redraw()}})},n.openLocationSelectionModal=function(){var t,n,a=this;this.savedState={product_name:this.product_name(),product_type:this.product_type,cpu:this.cpu(),memory:this.memory(),storage:this.storage(),disk_type:this.disk_type(),bandwidth:this.bandwidth(),GIG:this.GIG(),cost:this.cost(),score:this.score(),payment_cycle:this.payment_cycle(),monitor_url:this.monitor_url(),monitor_rule:this.monitor_rule(),available:this.available(),currency:this.currency(),review_url:this.review_url(),buy_url:this.buy_url(),merchant_id:(null==(t=this.selectedMerchants()[0])?void 0:t.id)||null,location_id:(null==(n=this.selectedLocations()[0])?void 0:n.id)||null,tags:this.selectedVpsTags().map((function(t){return t.id}))},i().modal.show(H,{state:this.state,savedState:this.savedState,onsubmit:function(t){a.handleLocationSelect(t),i().modal.show(e,{state:a.state,vps:a.savedState}),m.redraw()}})},n.openTagsSelectionModal=function(){var t,n,a=this;this.savedState={product_name:this.product_name(),product_type:this.product_type,cpu:this.cpu(),memory:this.memory(),storage:this.storage(),disk_type:this.disk_type(),bandwidth:this.bandwidth(),GIG:this.GIG(),cost:this.cost(),score:this.score(),payment_cycle:this.payment_cycle(),monitor_url:this.monitor_url(),monitor_rule:this.monitor_rule(),available:this.available(),currency:this.currency(),review_url:this.review_url(),buy_url:this.buy_url(),merchant_id:(null==(t=this.selectedMerchants()[0])?void 0:t.id)||null,location_id:(null==(n=this.selectedLocations()[0])?void 0:n.id)||null,tags:this.selectedVpsTags().map((function(t){return t.id}))},i().modal.show(K,{state:this.state,savedState:this.savedState,onsubmit:function(t){a.handleVpsTagsSelect(t),i().modal.show(e,{state:a.state,vps:a.savedState}),m.redraw()}})},n.handleMerchantSelect=function(t){this.state.selectedMerchants=t,m.redraw()},n.handleLocationSelect=function(t){this.state.selectedLocations=t,m.redraw()},n.handleVpsTagsSelect=function(t){this.state.selectedVpsTags=t,m.redraw()},n.remove=function(){this.user,this.loading=!0,m.redraw()},n.onConfirmSubmit=function(){var t,e,n=this,a={product_name:this.product_name(),product_type:this.product_type,cpu:this.cpu(),memory:this.memory(),storage:this.storage(),disk_type:this.disk_type(),bandwidth:this.bandwidth(),GIG:this.GIG(),cost:this.cost(),score:this.score(),payment_cycle:this.payment_cycle(),monitor_url:this.monitor_url(),monitor_rule:this.monitor_rule(),available:this.available(),currency:this.currency(),review_url:this.review_url(),buy_url:this.buy_url(),merchant_id:(null==(t=this.selectedMerchants()[0])?void 0:t.id)||null,location_id:(null==(e=this.selectedLocations()[0])?void 0:e.id)||null,tags:this.selectedVpsTags().map((function(t){return t.id}))};a.product_name&&a.merchant_id&&a.location_id?i().request({method:"POST",url:i().forum.attribute("apiUrl")+"/nodeloc/vps/add",body:a}).then((function(){i().alerts.show(k(),{type:"success"},"添加成功"),n.hide(),n.state.refresh()})).catch((function(){i().alerts.show(k(),{type:"error"},"添加失败")})):i().alerts.show(k(),{type:"success"},"名称和商家、地区不能为空！")},e}(T()),tt=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).savedState={},e}v(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e);var n=this.attrs.location;this.settingType="add",this.user=e.attrs.user||i().session.user,this.state=this.attrs.state.modal.attrs.state,n?(this.settingType="edit",this.location_name=P()(n.location_name),this.location_intro=P()(n.location_intro)):(this.location_name=P()(""),this.location_intro=P()(""))},n.title=function(){return i().translator.trans("nodeloc-vps.forum.location.title")},n.className=function(){return"Modal--large"},n.content=function(){if(this.user)return m("div",null,m("div",{className:"Modal-body"},m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"location_name",placeholder:i().translator.trans("nodeloc-vps.forum.location.location_name"),bidi:this.location_name})),m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"location_intro",placeholder:i().translator.trans("nodeloc-vps.forum.location.location_intro"),bidi:this.location_intro})),m("div",{className:"Modal-footer"},m(f(),{onclick:this.onConfirmSubmit.bind(this),className:"Button Button--primary"},"确认"),m(f(),{onclick:this.hide.bind(this),className:"Button"},"取消"))))},n.remove=function(){this.user,this.loading=!0,m.redraw()},n.onConfirmSubmit=function(){var t=this,e={location_name:this.location_name(),location_intro:this.location_intro()};i().request({method:"POST",url:i().forum.attribute("apiUrl")+"/nodeloc/location/add",body:e}).then((function(){i().alerts.show(k(),{type:"success"},"添加成功"),t.hide(),t.state.refresh()})).catch((function(){i().alerts.show(k(),{type:"error"},"添加失败")}))},e}(T()),et=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).savedState={},e}v(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e);var n=this.attrs.merchant;this.settingType="add",this.user=e.attrs.user||i().session.user,this.state=this.attrs.state.modal.attrs.state,n?(this.settingType="edit",this.merchant_name=P()(n.merchant_name),this.merchant_intro=P()(n.merchant_intro),this.merchant_url=P()(n.merchant_url),this.merchant_link=P()(n.merchant_link),this.merchant_type=P()(n.merchant_type),this.merchant_homepage=P()(n.merchant_homepage)):(this.merchant_name=P()(""),this.merchant_intro=P()(""),this.merchant_url=P()(""),this.merchant_link=P()(""),this.merchant_type=P()(0),this.merchant_homepage=P()(""))},n.title=function(){return i().translator.trans("nodeloc-vps.forum.merchant.title")},n.className=function(){return"Modal--large"},n.content=function(){if(this.user)return m("div",null,m("div",{className:"Modal-body"},m("div",{style:"margin-top:15px;font-weight:bold;margin-bottom: 20px;"},m("label",{style:"width:25%;display: inline-block; "},i().translator.trans("nodeloc-vps.forum.merchant.merchant_name")),m("input",{style:"width:25%;display: inline-block;",required:!0,className:"FormControl",type:"text",bidi:this.merchant_name}),m("label",{style:"width:25%;display: inline-block;padding-left: 10px;"},i().translator.trans("nodeloc-vps.forum.merchant.merchant_type")),m(F(),{value:this.merchant_type(),style:"display: inline-block;",options:X,buttonClassName:"Button",onchange:this.merchant_type})),m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"pruduct_name",placeholder:i().translator.trans("nodeloc-vps.forum.merchant.merchant_intro"),bidi:this.merchant_intro})),m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"pruduct_name",placeholder:i().translator.trans("nodeloc-vps.forum.merchant.merchant_url"),bidi:this.merchant_url})),m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"pruduct_name",placeholder:i().translator.trans("nodeloc-vps.forum.merchant.merchant_link"),bidi:this.merchant_link})),m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"pruduct_name",placeholder:i().translator.trans("nodeloc-vps.forum.merchant.merchant_homepage"),bidi:this.merchant_homepage})),m("div",{className:"Modal-footer"},m(f(),{onclick:this.onConfirmSubmit.bind(this),className:"Button Button--primary"},"确认"),m(f(),{onclick:this.hide.bind(this),className:"Button"},"取消"))))},n.remove=function(){this.user,this.loading=!0,m.redraw()},n.onConfirmSubmit=function(){var t=this,e={merchant_name:this.merchant_name(),merchant_type:this.merchant_type(),merchant_intro:this.merchant_intro(),merchant_url:this.merchant_url(),merchant_link:this.merchant_link(),merchant_homepage:this.merchant_homepage()};i().request({method:"POST",url:i().forum.attribute("apiUrl")+"/nodeloc/merchant/add",body:e}).then((function(){i().alerts.show(k(),{type:"success"},"添加成功"),t.hide(),t.state.refresh()})).catch((function(){i().alerts.show(k(),{type:"error"},"添加失败")}))},e}(T()),nt=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).savedState={},e}v(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e);var n=this.attrs.tag;this.settingType="add",this.user=e.attrs.user||i().session.user,this.state=this.attrs.state.modal.attrs.state,n?(this.settingType="edit",this.tag_name=P()(n.tag_name),this.tag_intro=P()(n.tag_intro)):(this.tag_name=P()(""),this.tag_intro=P()(""))},n.title=function(){return i().translator.trans("nodeloc-vps.forum.tag.title")},n.className=function(){return"Modal--large"},n.content=function(){if(this.user)return m("div",null,m("div",{className:"Modal-body"},m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"tag_name",placeholder:i().translator.trans("nodeloc-vps.forum.tag.tag_name"),bidi:this.tag_name})),m("div",{style:"margin-bottom: 20px;"},m("input",{className:"FormControl",type:"text",id:"tag_intro",placeholder:i().translator.trans("nodeloc-vps.forum.tag.tag_intro"),bidi:this.tag_intro})),m("div",{className:"Modal-footer"},m(f(),{onclick:this.onConfirmSubmit.bind(this),className:"Button Button--primary"},"确认"),m(f(),{onclick:this.hide.bind(this),className:"Button"},"取消"))))},n.remove=function(){this.user,this.loading=!0,m.redraw()},n.onConfirmSubmit=function(){var t=this,e={tag_name:this.tag_name(),tag_intro:this.tag_intro()};i().request({method:"POST",url:i().forum.attribute("apiUrl")+"/nodeloc/tag/add",body:e}).then((function(){i().alerts.show(k(),{type:"success"},"添加成功"),t.hide(),t.state.refresh()})).catch((function(){i().alerts.show(k(),{type:"error"},"添加失败")}))},e}(T());const at=flarum.core.compat["components/LoadingIndicator"];var st=t.n(at);const it=flarum.core.compat["components/LogInModal"];var ot=t.n(it),rt=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.bodyClass="App--index",this.filterMerchants=[],this.filterLocations=[],this.filterVpsTags=[],app.setTitle(app.translator.trans("nodeloc-vps.forum.title.page_title")),app.vpsListState.refreshParams({filter:{},sort:"-created_at"})},n.applySorts=function(t){var e=app.vpsListState,n={merchants:this.filterMerchants,locations:this.filterLocations,tags:this.filterVpsTags};e.refreshParams({filter:{merchants:n.merchants.length?n.merchants.map((function(t){return t.id})):"",locations:n.locations.length?n.locations.map((function(t){return t.id})):"",tags:n.tags.length?n.tags.map((function(t){return t.id})):""},sort:{recent:"-created_at",score:"-score",score_asc:"score",cpu:"-cpu",cpu_asc:"cpu",memory:"-memory",memory_asc:"memory",storage:"-storage",storage_asc:"storage",bandwidth:"-bandwidth",bandwidth_asc:"bandwidth",GIG:"-gig",GIG_asc:"gig",price:"-price",price_asc:"price"}[t]})},n.formatM=function(t){return t<1e3?t+"M":(t/1e3).toFixed(1)+"G"},n.formatG=function(t){return t<1e3?t+"G":(t/1e3).toFixed(1)+"T"},n.view=function(){var t=this,e=null,n=app.vpsListState,a=app.session.user&&!0===app.forum.attribute("canAddProduct");return n.isInitialLoading()||n.isLoadingNext()?e=st().component({size:"large"}):n.hasNext()&&(e=f().component({className:"Button",icon:"fas fa-chevron-down",onclick:n.loadNext.bind(n)},"加载更多")),n.isInitialLoading()&&n.isEmpty()?m(st(),null):m("div",{className:"IndexPage"},c().prototype.hero(),m("div",{className:"container"},m("div",{className:"sideNavContainer"},m("nav",{className:"IndexPage-nav sideNav"},m("ul",null,w()(c().prototype.sidebarItems().toArray()))),m("div",{className:"IndexPage-results sideNavOffset"},m("div",null,m(N,{onChange:function(e){return t.applySorts(e)},state:n}),m(f(),{className:"Button merchant hasIcon",icon:"fas fa-store",onclick:function(){return t.openMerchantSelectionModal()}},"选择商家"),m(f(),{style:"display: inline-block;margin-left: 10px;",className:"Button location hasIcon",icon:"fa-solid fa-location-dot",onclick:function(){return t.openLocationSelectionModal()}},"选择地区"),m(f(),{style:"display: inline-block;margin-left: 10px;",className:"Button location hasIcon",icon:"fa-solid fa-tags",onclick:function(){return t.openTagsSelectionModal()}},"选择标签"),m(f(),{className:"Button vps-fresh",icon:"fas fa-sync","aria-label":"刷新",onclick:function(){n.refresh()}}),a&&m(f(),{className:"Button vps-add-botton",icon:"fas fa-plus",onclick:function(){app.session.user?app.modal.show(Z,{state:n}):app.modal.show(ot())}},app.translator.trans("nodeloc-vps.forum.button.product")),a&&m(f(),{className:"Button vps-add-botton",icon:"fas fa-plus",onclick:function(){app.session.user?app.modal.show(et,{state:n}):app.modal.show(ot())}},app.translator.trans("nodeloc-vps.forum.button.merchant")),a&&m(f(),{className:"Button vps-add-botton",icon:"fas fa-plus",onclick:function(){app.session.user?app.modal.show(tt,{state:n}):app.modal.show(ot())}},app.translator.trans("nodeloc-vps.forum.button.location")),a&&m(f(),{className:"Button vps-add-botton",icon:"fas fa-plus",onclick:function(){app.session.user?app.modal.show(nt,{state:n}):app.modal.show(ot())}},app.translator.trans("nodeloc-vps.forum.button.tag"))),m("ul",{className:"VPS-SiteList"},n.getPages().map((function(e){return e.items.map((function(e){var n=e.data.relationships.tags.data.map((function(t){return t.id})).map((function(t){var e=app.store.data.vps_tags[t];return e?e.tag_name():"Unknown Tag"}));return m("li",{className:"VPS-List-item",id:"vps-"+e.id()},m("div",{className:"VPS-Product"},m("span",{className:"merchant"},app.store.data.vps_merchants[e.merchant_id()].merchant_name()),m("br",null),m("span",{className:"product"},e.product_name())),m("div",{className:"VPS-store"},m("span",null,function(t){for(var e="number"==typeof t&&t>=0&&t<=5?t:0,n=Math.floor(e),a=5-n,s=[],i=0;i<n;i++)s.push(m("i.fas.fa-star"));for(var o=0;o<a;o++)s.push(m("i.far.fa-star"));return s}(e.score())),m("br",null),m("span",null,Q[e.available()])),m("div",{className:"VPS-config"},m("span",null,e.cpu()," vCPU ",e.memory(),"G RAM ",t.formatG(e.storage())," ",Y[e.disk_type()]),m("br",null),t.formatM(e.GIG()),"带宽 ",t.formatG(e.bandwidth()),"流量"),m("div",{className:"VPS-location"},m("span",null,app.store.data.vps_locations[e.location_id()].location_name())),m("div",{className:"VPS-cost"},m("span",null,e.cost(),J[e.currency()],"/",z[e.payment_cycle()]),m("br",null),m("span",null,"约",e.price(),"CNY/年")),m("div",{className:"VPS-tags"},n.map((function(t){return m("span",{className:"tag-style"},t)}))),m("div",{className:"VPS-action"},m("a",{href:"#"},"监控"),m("a",{href:e.review_url()?e.review_url():"https://www.nodeloc.com/t/review"},"测评"),m("a",{href:e.buy_url()?e.buy_url():"#"},"购买")))}))}))),m("div",{className:"SupportSearchList-loadMore vps-more"},e)))))},n.openMerchantSelectionModal=function(){var t=this;app.modal.show($,{state:this.state,onsubmit:function(e){t.handleMerchantSelect(e),m.redraw()}})},n.openLocationSelectionModal=function(){var t=this;app.modal.show(H,{state:this.state,onsubmit:function(e){t.handleLocationSelect(e),m.redraw()}})},n.openTagsSelectionModal=function(){var t=this;app.modal.show(K,{state:this.state,onsubmit:function(e){t.handleVpsTagsSelect(e),m.redraw()}})},n.handleMerchantSelect=function(t){this.filterMerchants=t,this.applySorts(),m.redraw()},n.handleLocationSelect=function(t){this.filterLocations=t,this.applySorts(),m.redraw()},n.handleVpsTagsSelect=function(t){this.filterVpsTags=t,this.applySorts(),m.redraw()},e}(b());const ct=flarum.core.compat["common/extend"],lt=flarum.core.compat["forum/states/GlobalSearchState"];var mt=t.n(lt);function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function dt(t){var e=function(t,e){if("object"!=ut(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,"string");if("object"!=ut(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ut(e)?e:String(e)}function ht(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,dt(a.key),a)}}const pt=flarum.core.compat["common/states/PaginatedListState"];var ft=function(t){function e(e,n){var a;return void 0===n&&(n=1),(a=t.call(this,e,n,12)||this).vpsList=[],a}var n,a;return v(e,t),n=e,(a=[{key:"type",get:function(){return"vps_list"}}])&&ht(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),e}(t.n(pt)());const gt=flarum.core.compat.Model;var vt=t.n(gt),yt=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).id=vt().attribute("id"),e.product_name=vt().attribute("product_name"),e.product_type=vt().attribute("product_type"),e.merchant_id=vt().attribute("merchant_id"),e.location_id=vt().attribute("location_id"),e.score=vt().attribute("score"),e.cpu=vt().attribute("cpu"),e.memory=vt().attribute("memory"),e.storage=vt().attribute("storage"),e.disk_type=vt().attribute("disk_type"),e.bandwidth=vt().attribute("bandwidth"),e.GIG=vt().attribute("gig"),e.cost=vt().attribute("cost"),e.currency=vt().attribute("currency"),e.payment_cycle=vt().attribute("payment_cycle"),e.price=vt().attribute("price"),e.status=vt().attribute("status"),e.available=vt().attribute("available"),e.monitor_url=vt().attribute("monitor_url"),e.monitor_rule=vt().attribute("monitor_rule"),e.buy_url=vt().attribute("buy_url"),e.review_url=vt().attribute("review_url"),e.merchant=vt().hasOne("vps_merchants"),e.location=vt().hasOne("vps_locations"),e.vps_tags=vt().hasMany("vps_tags"),e}return v(e,t),e.prototype.apiEndpoint=function(){return"/vps_list"+(this.exists?"/"+this.data.id:"")},e}(vt());const bt=flarum.core.compat["common/Model"];var _t=t.n(bt),wt=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).id=_t().attribute("id"),e.merchant_name=_t().attribute("merchant_name"),e.merchant_intro=_t().attribute("merchant_intro"),e.merchant_url=_t().attribute("merchant_url"),e.merchant_type=_t().attribute("merchant_type"),e.merchant_link=_t().attribute("merchant_link"),e}v(e,t);var n=e.prototype;return n.merchant_name=function(){return _t().attribute<string>"merchant_name".call(this)},n.merchant_intro=function(){return _t().attribute<string>"merchant_intro".call(this)},n.apiEndpoint=function(){return"/nodeloc/merchant"+(this.exists?"/"+this.data.id:"")},e}(_t()),xt=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).id=_t().attribute("id"),e.location_name=_t().attribute("location_name"),e}return v(e,t),e.prototype.location_name=function(){return _t().attribute<string>"location_name".call(this)},e}(_t()),Nt=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).id=_t().attribute("id"),e.tag_name=_t().attribute("tag_name"),e}return v(e,t),e.prototype.tag_name=function(){return _t().attribute<string>"tag_name".call(this)},e}(_t());flarum.core.compat["forum/components/Notification"],flarum.core.compat["forum/components/NotificationGrid"],i().initializers.add("nodeloc/flarum-ext-vps",(function(){i().routes.vps={path:"/vps",component:rt},i().store.models.vpsList=yt,i().store.models.vps_merchants=wt,i().store.models.vps_locations=xt,i().store.models.vps_tags=Nt,i().vpsListState=new ft,(0,o.extend)(c().prototype,"navItems",(function(t){return t.add("vps",m(u(),{icon:"fa-solid fa-server",href:app.route("vps")},app.translator.trans("nodeloc-vps.forum.title.page_title")),100),t})),(0,ct.extend)(mt().prototype,"params",(function(t){"vps"===i().current.get("routeName")&&(t.cardFilter="")}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map